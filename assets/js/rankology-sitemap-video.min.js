jQuery(document).ready((function($){function rankology_call_media_uploader(){var mediaUploader,thumb;$(".rankology_video_thumbnail_upload").click((function(e){e.preventDefault(),$btn=$(this),mediaUploader?mediaUploader.open():(thumb=$(this).prev(),(mediaUploader=wp.media.frames.file_frame=wp.media({multiple:!1})).on("select",(function(){var attachment=mediaUploader.state().get("selection").first().toJSON();$btn.prev().val(attachment.url)})),mediaUploader.open())}))}rankology_call_media_uploader();var template=$("#wrap-videos .video:last").clone(),stop=!1;function rankology_call_video_accordion(){$("#wrap-videos .video").accordion({animate:!1,collapsible:!0,active:!1,heightStyle:"panel"})}$("#wrap-videos .video h3").click((function(event){stop&&(event.stopImmediatePropagation(),event.preventDefault(),stop=!1)})),rankology_call_video_accordion();var sectionsCount=$("#wrap-videos").attr("data-count");$("#add-video").click((function(){sectionsCount++;var section=template.clone().find(":input").each((function(){var input_id=this.id,input_name=this.name,newId=this.id.replace(/^(\w+)\[.*?\]/,"$1["+sectionsCount+"]");$(this).attr("name",input_name.replace(/^(\w+)\[.*?\]/,"$1["+sectionsCount+"]")),$(this).hasClass("rankology_video_thumbnail_upload")||$(this).attr("value",""),$(this).is(":checkbox")?($(this).parent().attr("for",input_id.replace(/^(\w+)\[.*?\]/,"$1["+sectionsCount+"]")),$(this).parent().attr("id",input_name.replace(/^(\w+)\[.*?\]/,"$1["+sectionsCount+"]"))):$(this).hasClass("rankology_video_thumbnail_upload")||($(this).prev().attr("for",input_id.replace(/^(\w+)\[.*?\]/,"$1["+sectionsCount+"]")),$(this).prev().attr("id",input_name.replace(/^(\w+)\[.*?\]/,"$1["+sectionsCount+"]"))),this.id=newId})).end().appendTo("#wrap-videos");return rankology_call_video_accordion(),$("#wrap-videos .video").accordion("destroy"),rankology_call_video_accordion(),$("[id^=__wp-uploader-id-]").each((function(){$(this).remove()})),rankology_call_media_uploader(),!1})),$("#wrap-videos").on("click",".remove-video",(function(){return $(this).fadeOut(300,(function(){return $(this).parent().parent().parent().remove(),!1})),!1}))}));